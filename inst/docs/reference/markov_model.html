<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Definition of Markov model and trace — markov_model • packDAMipd</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Definition of Markov model and trace — markov_model" />
<meta property="og:description" content="Definition of Markov model and trace" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">packDAMipd</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/cycle_dependent.html">Cycle dependent</a>
    </li>
    <li>
      <a href="../articles/Deterministic_sensitivity_analysis.html">Deterministic sensitivity analysis</a>
    </li>
    <li>
      <a href="../articles/Probabilstic_sensitivity_analysis.html">Probabilistic sensitivity analysis</a>
    </li>
    <li>
      <a href="../articles/Sick_sicker_age_dependent.html">Sick sicker age dependent</a>
    </li>
    <li>
      <a href="../articles/Simple_sick_sicker.html">Simple sick sicker model</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sheejamk/packDAMipd/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Definition of Markov model and trace</h1>
    <small class="dont-index">Source: <a href='https://github.com/sheejamk/packDAMipd/blob/master/R/1_model_functions.R'><code>R/1_model_functions.R</code></a></small>
    <div class="hidden name"><code>markov_model.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Definition of Markov model and trace</p>
    </div>

    <pre class="usage"><span class='fu'>markov_model</span><span class='op'>(</span>
  <span class='va'>current_strategy</span>,
  <span class='va'>cycles</span>,
  <span class='va'>initial_state</span>,
  discount <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span><span class='op'>)</span>,
  parameter_values <span class='op'>=</span> <span class='cn'>NULL</span>,
  half_cycle_correction <span class='op'>=</span> <span class='cn'>TRUE</span>,
  state_cost_only_prevalent <span class='op'>=</span> <span class='cn'>FALSE</span>,
  state_util_only_prevalent <span class='op'>=</span> <span class='cn'>FALSE</span>,
  method <span class='op'>=</span> <span class='st'>"half cycle correction"</span>,
  startup_cost <span class='op'>=</span> <span class='cn'>NULL</span>,
  startup_util <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>current_strategy</th>
      <td><p>strategy object</p></td>
    </tr>
    <tr>
      <th>cycles</th>
      <td><p>no of cycles</p></td>
    </tr>
    <tr>
      <th>initial_state</th>
      <td><p>value of states initially</p></td>
    </tr>
    <tr>
      <th>discount</th>
      <td><p>rate of discount for costs and qalys</p></td>
    </tr>
    <tr>
      <th>parameter_values</th>
      <td><p>parameters for assigning health states and
probabilities</p></td>
    </tr>
    <tr>
      <th>half_cycle_correction</th>
      <td><p>boolean to indicate half cycle correction</p></td>
    </tr>
    <tr>
      <th>state_cost_only_prevalent</th>
      <td><p>boolean parameter to indicate if the costs
for state occupancy is only for those in the state excluding those that
transitioned new. This is relevant when the transition cost is provided for
eg. in a state with dialysis the cost of previous dialysis is different from
the newly dialysis cases. Then the state_cost_only_prevalent should be TRUE</p></td>
    </tr>
    <tr>
      <th>state_util_only_prevalent</th>
      <td><p>boolean parameter to indicate if the
utilities for state occupancy is only for those in the state excluding
those that transitioned new.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>what type of half cycle correction needed</p></td>
    </tr>
    <tr>
      <th>startup_cost</th>
      <td><p>cost of states initially</p></td>
    </tr>
    <tr>
      <th>startup_util</th>
      <td><p>utility of states initially if any</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Markov trace</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Use the strategy, cycles, initial state values creating the markov model
and trace. As many probabilities /cost/utility value depend on age/time the
evaluation and assignment happens during each cycle. At the heart it does
a matrix multiplication using the previous row of the trace matrix and the
columns of the transition matrix. Also checks for population loss, calculates
cumulative costs and qalys (accounts for discounting
and half cycle correction)</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>tmat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>2</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fl'>4</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>tmat</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>rownames</a></span><span class='op'>(</span><span class='va'>tmat</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Healthy"</span>, <span class='st'>"Dead"</span><span class='op'>)</span>
<span class='va'>tm</span> <span class='op'>&lt;-</span> <span class='fu'><a href='populate_transition_matrix.html'>populate_transition_matrix</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='va'>tmat</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.5</span>, <span class='fl'>0.5</span>, <span class='fl'>0</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] "The transition matrix as explained"
#&gt;    transition number        probability name from from state to to state
#&gt; 1:                 1 prob_Healthy_to_Healthy    1    Healthy  1  Healthy
#&gt; 2:                 2    prob_Healthy_to_Dead    1    Healthy  2     Dead
#&gt; 3:                 3    prob_Dead_to_Healthy    2       Dead  1  Healthy
#&gt; 4:                 4       prob_Dead_to_Dead    2       Dead  2     Dead</div><div class='input'><span class='va'>a</span> <span class='op'>&lt;-</span> <span class='fu'><a href='health_state.html'>health_state</a></span><span class='op'>(</span><span class='st'>"Healthy"</span>, <span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>0</span>, <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='va'>b</span> <span class='op'>&lt;-</span> <span class='fu'><a href='health_state.html'>health_state</a></span><span class='op'>(</span><span class='st'>"Dead"</span>, <span class='fl'>1</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>health_states</span> <span class='op'>&lt;-</span> <span class='fu'><a href='combine_state.html'>combine_state</a></span><span class='op'>(</span><span class='va'>a</span>, <span class='va'>b</span><span class='op'>)</span>
<span class='va'>this.strategy</span> <span class='op'>&lt;-</span> <span class='fu'><a href='strategy.html'>strategy</a></span><span class='op'>(</span><span class='va'>tm</span>, <span class='va'>health_states</span>, <span class='st'>"intervention"</span><span class='op'>)</span>
<span class='fu'>markov_model</span><span class='op'>(</span><span class='va'>this.strategy</span>, <span class='fl'>10</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $strategy
#&gt; $name_strategy
#&gt; [1] "intervention"
#&gt; 
#&gt; $transition_matrix
#&gt; $trans_matrix
#&gt;     1   2
#&gt; 1 0.5 0.5
#&gt; 2 0.0 1.0
#&gt; 
#&gt; $name_states
#&gt; [1] 1 2
#&gt; 
#&gt; $no_states
#&gt; [1] 2
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "transition_matrix"
#&gt; 
#&gt; $states
#&gt; $states[[1]]
#&gt; $name
#&gt; [1] "Healthy"
#&gt; 
#&gt; $cost
#&gt; [1] 1
#&gt; 
#&gt; $utility
#&gt; [1] 1
#&gt; 
#&gt; $state_time
#&gt; [1] 0
#&gt; 
#&gt; $absorb
#&gt; [1] FALSE
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "health_state"
#&gt; 
#&gt; $states[[2]]
#&gt; $name
#&gt; [1] "Dead"
#&gt; 
#&gt; $cost
#&gt; [1] 1
#&gt; 
#&gt; $utility
#&gt; [1] 0
#&gt; 
#&gt; $state_time
#&gt; [1] 0
#&gt; 
#&gt; $absorb
#&gt; [1] TRUE
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "health_state"
#&gt; 
#&gt; 
#&gt; $transition_cost
#&gt; NULL
#&gt; 
#&gt; $transition_utility
#&gt; NULL
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "strategy"
#&gt; 
#&gt; $method
#&gt; [1] "half cycle correction"
#&gt; 
#&gt; $half_cycle_correction
#&gt; [1] TRUE
#&gt; 
#&gt; $transition_matrix
#&gt; $trans_matrix
#&gt;        1   2
#&gt; [1,] 0.5 0.5
#&gt; [2,] 0.0 1.0
#&gt; 
#&gt; $name_states
#&gt; [1] 1 2
#&gt; 
#&gt; $no_states
#&gt; [1] 2
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "transition_matrix"
#&gt; 
#&gt; $param_matrix
#&gt;       cycle
#&gt;  [1,]     0
#&gt;  [2,]     1
#&gt;  [3,]     2
#&gt;  [4,]     3
#&gt;  [5,]     4
#&gt;  [6,]     5
#&gt;  [7,]     6
#&gt;  [8,]     7
#&gt;  [9,]     8
#&gt; [10,]     9
#&gt; [11,]    10
#&gt; 
#&gt; $list_param_values
#&gt; NULL
#&gt; 
#&gt; $health_states
#&gt; $health_states[[1]]
#&gt; $name
#&gt; [1] "Healthy"
#&gt; 
#&gt; $cost
#&gt; [1] 1
#&gt; 
#&gt; $utility
#&gt; [1] 1
#&gt; 
#&gt; $state_time
#&gt; [1] 0
#&gt; 
#&gt; $absorb
#&gt; [1] FALSE
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "health_state"
#&gt; 
#&gt; $health_states[[2]]
#&gt; $name
#&gt; [1] "Dead"
#&gt; 
#&gt; $cost
#&gt; [1] 1
#&gt; 
#&gt; $utility
#&gt; [1] 0
#&gt; 
#&gt; $state_time
#&gt; [1] 0
#&gt; 
#&gt; $absorb
#&gt; [1] TRUE
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "health_state"
#&gt; 
#&gt; 
#&gt; $cycles
#&gt; [1] 10
#&gt; 
#&gt; $initial_state
#&gt; [1] 1 0
#&gt; 
#&gt; $discount
#&gt; [1] 0 0
#&gt; 
#&gt; $trace_matrix
#&gt;         Healthy      Dead Cycles
#&gt; 0  1.0000000000 0.0000000      0
#&gt; 1  0.5000000000 0.5000000      1
#&gt; 2  0.2500000000 0.7500000      2
#&gt; 3  0.1250000000 0.8750000      3
#&gt; 4  0.0625000000 0.9375000      4
#&gt; 5  0.0312500000 0.9687500      5
#&gt; 6  0.0156250000 0.9843750      6
#&gt; 7  0.0078125000 0.9921875      7
#&gt; 8  0.0039062500 0.9960938      8
#&gt; 9  0.0019531250 0.9980469      9
#&gt; 10 0.0009765625 0.9990234     10
#&gt; 
#&gt; $cost_matrix
#&gt;         Healthy      Dead Total discounted cost Cumulative cost
#&gt; 0  1.0000000000 0.0000000                   0.5             0.5
#&gt; 1  0.5000000000 0.5000000                   1.0             1.5
#&gt; 2  0.2500000000 0.7500000                   1.0             2.5
#&gt; 3  0.1250000000 0.8750000                   1.0             3.5
#&gt; 4  0.0625000000 0.9375000                   1.0             4.5
#&gt; 5  0.0312500000 0.9687500                   1.0             5.5
#&gt; 6  0.0156250000 0.9843750                   1.0             6.5
#&gt; 7  0.0078125000 0.9921875                   1.0             7.5
#&gt; 8  0.0039062500 0.9960938                   1.0             8.5
#&gt; 9  0.0019531250 0.9980469                   1.0             9.5
#&gt; 10 0.0009765625 0.9990234                   0.5            10.0
#&gt; 
#&gt; $utility_matrix
#&gt;         Healthy Dead Total discounted utility Cumulative utility
#&gt; 0  1.0000000000    0             0.5000000000           0.500000
#&gt; 1  0.5000000000    0             0.5000000000           1.000000
#&gt; 2  0.2500000000    0             0.2500000000           1.250000
#&gt; 3  0.1250000000    0             0.1250000000           1.375000
#&gt; 4  0.0625000000    0             0.0625000000           1.437500
#&gt; 5  0.0312500000    0             0.0312500000           1.468750
#&gt; 6  0.0156250000    0             0.0156250000           1.484375
#&gt; 7  0.0078125000    0             0.0078125000           1.492188
#&gt; 8  0.0039062500    0             0.0039062500           1.496094
#&gt; 9  0.0019531250    0             0.0019531250           1.498047
#&gt; 10 0.0009765625    0             0.0004882812           1.498535
#&gt; 
#&gt; $startup_cost
#&gt; NULL
#&gt; 
#&gt; $startup_util
#&gt; NULL
#&gt; 
#&gt; attr(,"class")
#&gt; [1] "markov_model"</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sheeja Manchira Krishnan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


